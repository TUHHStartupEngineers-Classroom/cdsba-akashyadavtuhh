{
  "hash": "5b431a2426134464bcca2c9fe171a4da",
  "result": {
    "markdown": "---\ntitle: \"Directed Acyclic Graphs\"\nauthor: \"akash.yadav `<akash.yadav@tuhh.de>`\"\n---\n\n\n\n## Load Packages\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-1_614774e7d92f0dea6371d627f063d87f'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.4     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.1\n#> ✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.2     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(dagitty)\nlibrary(ggdag)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'ggdag'\n#> \n#> The following object is masked from 'package:stats':\n#> \n#>     filter\n```\n:::\n:::\n\n\n## Assignment 1: Confounder DAG\n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-2_f72d9392e5eccca4d887178bd683bfb4'}\n\n```{.r .cell-code}\n# Define the confounder DAG\ndag <- 'dag {\nbb=\"0,0,1,1\"\nParking [exposure,pos=\"0.1,0.5\"]\nSales [outcome,pos=\"0.5,0.5\"]\nA [pos=\"0.3,0.1\"]\nB [pos=\"0.3,0.3\"]\nC [pos=\"0.3,0.5\"]\nD [pos=\"0.3,0.7\"]\nLocation [pos=\"0.3,1\"]\nParking -> A\nParking -> B\nParking -> C\nParking -> D\nA -> Sales\nB -> Sales\nC -> Sales\nD -> Sales\nLocation -> Parking\nLocation -> Sales\n}\n'\n# draw DAG\nggdag_status(dag)\n```\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Assignment 2: Linear Models\n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-3_685aa4e311c4c24f5aaa6d2db4db9cf9'}\n\n```{.r .cell-code}\n# Load customer satisfaction data\ncustomer_sat <- readRDS(\"../Causal_Data_Science_Data/customer_sat.rds\")\n\n# Fit linear models without and with conditioning on subscription\nlm_not_cond <- lm(satisfaction ~ ., customer_sat[, 1:2])\nsummary(lm_not_cond)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ ., data = customer_sat[, 1:2])\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -12.412  -5.257   1.733   4.506  12.588 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#> follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 7.923 on 13 degrees of freedom\n#> Multiple R-squared:  0.658,\tAdjusted R-squared:  0.6316 \n#> F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n```\n:::\n\n```{.r .cell-code}\nlm_cond <- lm(satisfaction ~ ., customer_sat)\nsummary(lm_cond)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ ., data = customer_sat)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#> \n#> Coefficients:\n#>                      Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#> follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#> subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#> subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.958 on 11 degrees of freedom\n#> Multiple R-squared:  0.9597,\tAdjusted R-squared:  0.9487 \n#> F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08\n```\n:::\n:::\n\n\n## Assignment 3: Analysis of Regression Results\n\n> For the regression without conditioning on subscription, there is a negative correlation of about 3.3 between follow-ups and satisfaction, indicating that follow-ups seem to annoy customers. When conditioning the regression on the subscription, a positive correlation of about 2.2 between satisfaction and follow-ups is observed. This suggests that satisfaction correlates negatively with the level of subscription, indicating that customers value follow-ups but not the benefits of a higher subscription level.\"\nnot_cond_corr\n\n## Assignment 4: Scatter Plots\n\n### Without Conditioning on Subscription\n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-4_b2563654e7eaf7b88a260b8457dd7c2a'}\n\n```{.r .cell-code}\n# Scatter plot without conditioning on subscription\nsimps_not_cond_plot <- ggplot(customer_sat[, 1:2], aes(x = follow_ups, y = satisfaction)) +\n  geom_point(alpha = .8) +\n  stat_smooth(method = \"lm\", se = FALSE)\n\nsimps_not_cond_plot\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### Conditioning on Subscription\n\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-5_5baac2702f94cfd9825bd56352e6026b'}\n\n```{.r .cell-code}\n#Satisfaction vs Follow_ups categorized by the subscription:\nggplot(customer_sat,aes(x = satisfaction, y = follow_ups, group=subscription, color=subscription)) +  geom_point() +\n  stat_smooth(method = \"lm\", se = F)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}